<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Stegano</title>
  <meta name="generator" content="Geany 1.33" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">

  {{{cfg.head}}}

  {{{cfg.theme}}}

  {{{cfg.styles.index}}}

<style>
  p {
    width: 50%;
  }
</style>

</head>
<script>

// Modified:
//  https://stackoverflow.com/questions/1349404/generate-random-string-characters-in-javascript
function makeid(length, upper = true, lower = true, digit = true) {
  var result           = '';
  var characters       = '';
  if (upper) characters += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
  if (lower) characters += 'abcdefghijklmnopqrstuvwxyz';
  if (digit) characters += '0123456789';
  var charactersLength = characters.length;
  for ( var i = 0; i < length; i++ ) {
    result += characters.charAt(Math.floor(Math.random() * charactersLength));
  }
  return result;
}

submitGenKeys = () => {
  const form = document.getElementById('genKeysForm');
  form.submit();
}

onload = () => {
  document.getElementById('keyname').value = makeid(10);
  document.getElementById('keyemail').value =
    makeid(10, false) + '@' + makeid(10, false) + '.net';
}
</script>

<body>
  {{{cfg.logo}}}
  {{{cfg.heading}}}

  <input type="button" value="Messages" onclick="window.location.href='/imagesdir'">
  <p>Welcome to steganoserver!
  <br>Before you can start sending secret messages hidden in-plain-site images, a
  set of keys need to be built to prevent unwanted eyes viewing your messages.</p>
 <div>
  <p><img style="height: 3em;width: auto;float:left;border-radius: 15px;margin-right:1em;" src="/assets/private_key.png">
  <img style="height: 3em;width: auto;float:right;border-radius: 15px;margin-left:1em;" src="/assets/public_key.png">
  The first key is 'private' (pink) and only you have that one. The second key
  is 'public' (blue) which you exchange with friends. You send/post your public key,
  they send/post theirs. They download yours, You download theirs.</p>

  <p><img style="height: 3em;width: auto;float:left;border-radius: 10px;margin-right:1em;" src="/assets/key-1242056_640.jpg">
  Your friends public keys are placed on your key ring. The key ring is used
  to embed scrambled messages into images. Using key ring(s), you can select which
  friend(s) can unscramble a given message. Now you can secretly message each other
  by embedding scrambled messages into other images.</p>
  </div>
  <h3>Generate your public and private keys</h3>
  <p>So let's begin with a few questions needed to make your keys...</p>
  <div class="left-side box">
    <form name="genKeysForm" id="genKeysForm" action="/genkeys" method="post" encType="multipart/form-data">
    Name, nickname, handle, or identity so friends know it is you. Images will
    have this name included in their filename - so only letters, numbers, spaces,
    and underbars are allowed :(<br>
    <input type="text" id="keyname" name="keyname" form="genKeysForm" value="" />
    <br>Email, can be real or fake but needs to be formatted to look like a real one<br>
    <input type="text" id="keyemail" name="keyemail" form="genKeysForm" value="" />
    <br>Optional short description, quote, saying shown with your public key<br>
    <input type="text" name="keycomment" form="genKeysForm" value="" />
  </div>
  <div style="clear: both;"></div>
  <p>  <img style="height: 5em;width: auto;float:right; margin-left:1em;" src="/assets/chest-2884250_640.png">
  Almost done! Because your private key is so precious, it must be safely locked away
  in a lockbox with a few other dark secrets used to scramble your messages.
  To open the lockbox you will need to give a secret phrase.</p>
  <p><img style="height: 3em;width: auto;float:left;border-radius: 10px;margin-right:1em;" src="/assets/chest-2536477_640.png">
  Remember! The words
  are magically bound to the box when it is cast, so it can never-ever be re-opened
  if the phrase is forgotten. Your previous messages can not be unscrambled and you
  would have to start over with a brand new set of keys!</p>
  <p>Also, you will need your secret lockbox phrase to restart this steganography server!</p>
  <div class="left-side box">
    Enter secret phrase that opens the lockbox containing your private key. Any characters can
    be used but highly recommend just words of a phrase you will remember. The phrase
    you enter will not be known or shown again, so might wanna have a copy in a safe place.<br>
    <input type="text" name="keypassphrase" form="genKeysForm" value="{{{cfg.key.passphrase}}}" />
    <br>Excellent, press this button to create your keys.<br>
    <button onclick="submitGenKeys();">Create keys and lockbox</button>
    </form>
  </div>
  <div class="right-side"></div>

  <div style="clear: both;"></div>
{{#cfg.inlineHelp}}
  <p>Not real long, but takes a bit of time to generate the keys.</p>
{{/cfg.inlineHelp}}
  <footer>{{{cfg.footer}}}</footer>
</body>

</html>
